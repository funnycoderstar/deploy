(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{445:function(_,v,t){"use strict";t.r(v);var P=t(33),a=Object(P.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("p",[_._v("HTTP和 WebSocket都是基于 TCP/IP；")]),_._v(" "),t("h2",{attrs:{id:"一个数据包的旅程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一个数据包的旅程"}},[_._v("#")]),_._v(" 一个数据包的旅程")]),_._v(" "),t("p",[_._v("互联网中的数据都是通过数据包来传输的，如果发送的数据很大，那么该数据就会被拆分为很多小数据包来传输。")]),_._v(" "),t("p",[_._v("数据包如何送达主机 -> 主机如何将数据包转交给应用 -> 数据是如何被完整地送达应用程序")]),_._v(" "),t("h3",{attrs:{id:"_1-ip：把数据包送达目的主机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ip：把数据包送达目的主机"}},[_._v("#")]),_._v(" 1. IP：把数据包送达目的主机")]),_._v(" "),t("p",[_._v("计算机的地址就称为 IP 地址，访问任何网站实际上只是你的计算机向另外一台计算机请求信息。")]),_._v(" "),t("h3",{attrs:{id:"_2-udp：把数据包送达应用程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-udp：把数据包送达应用程序"}},[_._v("#")]),_._v(" 2. UDP：把数据包送达应用程序")]),_._v(" "),t("p",[_._v("IP 是非常底层的协议，只负责把数据包传送到对方电脑，但是对方电脑并不知道把数据包交给哪个程序，是交给浏览器还是交给王者荣耀？因此，需要基于 IP 之上开发能和应用打交道的协议，最常见的是“用户数据包协议（User Datagram Protocol）”，简称 UDP。")]),_._v(" "),t("p",[_._v("IP 通过 IP 地址信息把数据包发送给指定的电脑，而 UDP 通过端口号把数据包分发给正确的程序。")]),_._v(" "),t("p",[_._v("在使用 UDP 发送数据时，有各种因素会导致数据包出错，虽然 UDP 可以校验数据是否正确，但是对于错误的数据包，UDP 并不提供重发机制，只是丢弃当前的包，而且 UDP 在发送之后也无法知道是否能达到目的地。")]),_._v(" "),t("p",[_._v("虽说 UDP 不能保证数据可靠性，但是传输速度却非常快，所以 UDP 会应用在一些关注速度、但不那么严格要求数据完整性的领域，如在线视频、互动游戏等。")]),_._v(" "),t("h3",{attrs:{id:"_3-tcp：把数据完整地送达应用程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-tcp：把数据完整地送达应用程序"}},[_._v("#")]),_._v(" 3. TCP：把数据完整地送达应用程序")]),_._v(" "),t("p",[_._v("UDP 传输会存在两个问题：")]),_._v(" "),t("ul",[t("li",[_._v("数据包在传输过程中容易丢失；")]),_._v(" "),t("li",[_._v("UDP无法把小的数据包按照顺序组装成完整的文件")])]),_._v(" "),t("p",[_._v("基于这两个问题，我们引入 TCP 了。TCP（Transmission Control Protocol，传输控制协议）是一种面向连接的、可靠的、基于字节流的传输层通信协议。相对于 UDP，TCP 有下面两个特点:")]),_._v(" "),t("ul",[t("li",[_._v("对于数据包丢失的情况，TCP 提供重传机制；")]),_._v(" "),t("li",[_._v("TCP 引入了数据包排序机制，用来保证把乱序的数据包组合成一个完整的文件。")])]),_._v(" "),t("p",[_._v("TCP 单个数据包的传输流程和 UDP 流程差不多，不同的地方在于，通过 TCP 头的信息保证了一块大的数据传输的完整性。")]),_._v(" "),t("p",[_._v("一个完整的 TCP 连接的生命周期")]),_._v(" "),t("ul",[t("li",[_._v("”三次握手“建立连接，在建立一个TCP连接之前，客户端和服务端总共要发送三个数据包以确认连接的建立")]),_._v(" "),t("li",[_._v("传输数据")]),_._v(" "),t("li",[_._v("断开连接")])]),_._v(" "),t("p",[_._v("TCP 为了保证数据传输的可靠性，牺牲了数据包的传输速度，因为“三次握手”和“数据包校验机制”等把传输过程中的数据包的数量提高了一倍。")]),_._v(" "),t("h2",{attrs:{id:"其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[_._v("#")]),_._v(" 其他")]),_._v(" "),t("p",[_._v("HTTP协议和TCP协议都是TCP/IP协议簇的子集。")]),_._v(" "),t("p",[_._v("HTTP协议属于应用层，TCP协议属于传输层，HTTP协议位于TCP协议的上层。")]),_._v(" "),t("p",[_._v("了解 TCP 协议，是为了全方位了解 HTTP，包括其实际功能和局限性，之后才会更加深刻地理解为什么要推出 HTTP/2，以及为什么要推出 QUIC 协议，也就是未来的 HTTP/3。")]),_._v(" "),t("p",[_._v("五层因特网协议栈其实就是：")]),_._v(" "),t("ol",[t("li",[_._v("应用层(dns,http) DNS解析成IP并发送http请求")]),_._v(" "),t("li",[_._v("传输层(tcp,udp) 建立tcp连接（三次握手）")]),_._v(" "),t("li",[_._v("网络层(IP,ARP) IP寻址")]),_._v(" "),t("li",[_._v("数据链路层(PPP) 封装成帧")]),_._v(" "),t("li",[_._v("物理层(利用物理介质传输比特流) 物理传输（然后传输的时候通过双绞线，电磁波等各种介质）")])]),_._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[_._v("#")]),_._v(" 总结")]),_._v(" "),t("ul",[t("li",[_._v("TCP: 一个面向连接的、可靠的、基于字节流的传输层协议。")]),_._v(" "),t("li",[_._v("UDP: 一个面向无连接的传输层协议")])]),_._v(" "),t("p",[_._v("和UDP相比， TCP有三大核心特性")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("面向连接。所谓的连接，指的是客户端和服务器的连接，在双方互相通信之前，TCP 需要三次握手建立连接，而 UDP 没有相应建立连接的过程。")])]),_._v(" "),t("li",[t("p",[_._v("可靠性。TCP 花了非常多的功夫保证连接的可靠，这个可靠性体现在哪些方面呢？一个是有状态，另一个是可控制。")])])]),_._v(" "),t("p",[_._v("TCP 会精准记录哪些数据发送了，哪些数据被对方接收了，哪些没有被接收到，而且保证数据包按序到达，不允许半点差错。这是有状态。\n当意识到丢包了或者网络环境不佳，TCP 会根据具体情况调整自己的行为，控制自己的发送速度或者重发。这是可控制。")]),_._v(" "),t("p",[_._v("相应的，UDP 就是无状态, 不可控的。")]),_._v(" "),t("p",[_._v("面向字节流。UDP 的数据传输是基于数据报的，一个一个地发，一个一个地收,这是因为仅仅只是继承了 IP 层的特性，而 TCP 为了维护状态，将一个个 IP 包变成了字节流。")]),_._v(" "),t("h2",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[_._v("#")]),_._v(" 参考")]),_._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/fundebug/p/differences-of-tcp-and-udp.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("一文搞懂TCP与UDP的区别"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);v.default=a.exports}}]);