(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{471:function(a,t,e){"use strict";e.r(t);var s=e(33),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"提升webpack编译速度"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提升webpack编译速度"}},[a._v("#")]),a._v(" 提升webpack编译速度")]),a._v(" "),e("ul",[e("li",[a._v("升级一些配置： node、webpack4.x、babel 7.x")]),a._v(" "),e("li",[a._v("多进程，happypack")]),a._v(" "),e("li",[a._v("使用 DLLPlugin 和 DLLReferencePlugin 插件，提前打包一些不经常变动的框架代码，比如 Vue，vue-router等\n"),e("ul",[e("li",[e("a",{attrs:{href:"https://www.cnblogs.com/tugenhua0707/p/9520780.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("深入浅出的webpack构建工具---DllPlugin DllReferencePlugin提高构建速度(七)"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://webpack.js.org/plugins/dll-plugin/",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack官方文档-dll plugin"),e("OutboundLink")],1)])])]),a._v(" "),e("li",[a._v("缓存：babel-loader开启缓存， babel的cache Directory为 true；添加 cache-loader")]),a._v(" "),e("li",[a._v("惰性编译，使用 lazy-compile-webpack-plugin， 通过延迟编译动态导入来提升Webpack启动时间\n"),e("ul",[e("li",[a._v("这么说吧，你有一个大型项目，100多个路由，全部动态import，即使你只是想改某个页面的小功能，webpack依然会把所有的路由都进行处理和构建，这个插件的功能就是只会构建最终会被浏览器加载的模块。")])])])]),a._v(" "),e("h2",{attrs:{id:"分析过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分析过程"}},[a._v("#")]),a._v(" 分析过程")]),a._v(" "),e("h3",{attrs:{id:"webpack构建完整过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack构建完整过程"}},[a._v("#")]),a._v(" webpack构建完整过程")]),a._v(" "),e("ul",[e("li",[a._v("初始化：启动构建，读取与合并配置参数， 加载"),e("a",{attrs:{href:"https://www.webpackjs.com/api/plugins/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Plugin"),e("OutboundLink")],1),a._v(", 实例化 "),e("a",{attrs:{href:"https://www.webpackjs.com/api/compiler-hooks/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Compiler"),e("OutboundLink")],1)]),a._v(" "),e("li",[a._v("编译：从Entry发出，针对每个"),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/modules/#src/components/Sidebar/Sidebar.jsx",target:"_blank",rel:"noopener noreferrer"}},[a._v("Module"),e("OutboundLink")],1),a._v("串行调用对应的"),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/loaders/#src/components/Sidebar/Sidebar.jsx",target:"_blank",rel:"noopener noreferrer"}},[a._v("Loader"),e("OutboundLink")],1),a._v("去翻译文件内容，再找到该Module依赖的Module, 递归地进行编译处理。")]),a._v(" "),e("li",[a._v("输出：对编译后的Module组合成"),e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/21318102",target:"_blank",rel:"noopener noreferrer"}},[a._v("Chunk"),e("OutboundLink")],1),a._v(", 把Chunk转换成文件，输出到本地。")])]),a._v(" "),e("h3",{attrs:{id:"分析webpack打包编译每步所需要的时间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分析webpack打包编译每步所需要的时间"}},[a._v("#")]),a._v(" 分析webpack打包编译每步所需要的时间")]),a._v(" "),e("h3",{attrs:{id:"使用-webapck-配置dev-server-的stats选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-webapck-配置dev-server-的stats选项"}},[a._v("#")]),a._v(" 使用 webapck 配置dev-server 的"),e("a",{attrs:{href:"https://webpack.js.org/configuration/stats/#stats",target:"_blank",rel:"noopener noreferrer"}},[a._v("stats"),e("OutboundLink")],1),a._v("选项")]),a._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[a._v("devServer"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    stats"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        timings"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        modules"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        assets"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        entrypoints"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        assetsSort"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'field'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        builtAt"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        cached"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        cachedAssets"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        children"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        chunks"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        chunkGroups"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        chunkModules"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        chunkOrigins"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        performance"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        errors"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        warnings"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[e("a",{attrs:{href:"https://juejin.im/post/5b8a07d1f265da433874f5ef",target:"_blank",rel:"noopener noreferrer"}},[a._v("用实验的思路优化webpack4项目编译速度"),e("OutboundLink")],1)]),a._v(" "),e("h3",{attrs:{id:"使用插件-speed-measure-webpack-plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用插件-speed-measure-webpack-plugin"}},[a._v("#")]),a._v(" 使用插件 "),e("a",{attrs:{href:"https://github.com/stephencookdev/speed-measure-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[a._v("speed-measure-webpack-plugin"),e("OutboundLink")],1)]),a._v(" "),e("p",[a._v("使用方法如下\nnpm i -D speed-measure-webpack-plugin")]),a._v(" "),e("p",[a._v("修改如下的webpack配置")]),a._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" webpackConfig "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MyPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MyOtherPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("To")]),a._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" SpeedMeasurePlugin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"speed-measure-webpack-plugin"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" smp "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SpeedMeasurePlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" webpackConfig "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" smp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("wrap")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MyPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MyOtherPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("h2",{attrs:{id:"升级babel-7-webapck-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#升级babel-7-webapck-4"}},[a._v("#")]),a._v(" 升级babel 7 && webapck 4")]),a._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[a._v("npx babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("upgrade "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("write\n")])])]),e("ul",[e("li",[e("a",{attrs:{href:"https://vue-loader.vuejs.org/zh/migrating.html#%E5%80%BC%E5%BE%97%E6%B3%A8%E6%84%8F%E7%9A%84%E4%B8%8D%E5%85%BC%E5%AE%B9%E5%8F%98%E6%9B%B4",target:"_blank",rel:"noopener noreferrer"}},[a._v("vue-loader 的变更"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://babel.docschina.org/docs/en/7.0.0/v7-migration",target:"_blank",rel:"noopener noreferrer"}},[a._v("babel 7.x 更新"),e("OutboundLink")],1)])]),a._v(" "),e("p",[a._v("配置文件由 "),e("code",[a._v(".babelrc")]),a._v("改为 "),e("code",[a._v("babel.config.js")]),a._v("\n包重命名：babylon 现在是 @babel/parser")]),a._v(" "),e("h2",{attrs:{id:"webpack-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-4"}},[a._v("#")]),a._v(" webpack 4")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000014247030",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack4升级完全指南"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/diamont1001/webpack-summary/issues/4",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack3升级到webpack4"),e("OutboundLink")],1)])]),a._v(" "),e("p",[a._v("npm i -D webpack-cli")]),a._v(" "),e("p",[a._v("mode的修改")]),a._v(" "),e("p",[a._v("vue-loader 新版本用法的修改\nclean-webpack-plugin 新版本用法的修改")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/91e60af11cc9",target:"_blank",rel:"noopener noreferrer"}},[a._v("mini-css-extract-plugin"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://www.cnblogs.com/tugenhua0707/p/9520780.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("深入浅出的webpack构建工具---DllPlugin DllReferencePlugin提高构建速度(七)"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://juejin.im/post/5ad9b0ecf265da0b7155d521",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack优化之HappyPack 实战"),e("OutboundLink")],1)])]),a._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/pigcan/blog/issues/1",target:"_blank",rel:"noopener noreferrer"}},[a._v("构建性能优化探索"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/amireh/happypack",target:"_blank",rel:"noopener noreferrer"}},[a._v("happypack多线程"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/webpack-contrib/cache-loader",target:"_blank",rel:"noopener noreferrer"}},[a._v("缓存 cache-loader"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://juejin.im/post/5c763885e51d457380771ab0",target:"_blank",rel:"noopener noreferrer"}},[a._v("Webpack4+Babel7优化70%速度"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);