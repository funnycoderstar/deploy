(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{352:function(s,t,a){"use strict";a.r(t);var n=a(33),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"node中可以通过process-argv来获取参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node中可以通过process-argv来获取参数"}},[s._v("#")]),s._v(" node中可以通过process.argv来获取参数")]),s._v(" "),a("ol",[a("li",[s._v("新建一个shell.js")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("在终端输入 node shell.js")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[ '/Users/wangyaxing/.nvm/versions/node/v10.7.0/bin/node',\n  '/Users/wangyaxing/temp/vue-project/shell.js' ]\n")])])]),a("p",[s._v("在终端输入 node shell.js abc")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Users/wangyaxing/.nvm/versions/node/v10.7.0/bin/node'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Users/wangyaxing/temp/vue-project/shell.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abc'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("p",[s._v("process.argv的用法是第一个是node文件， 第二个是脚本文件， 第三个是参数")]),s._v(" "),a("h2",{attrs:{id:"npm-scripts（npm脚本）发送命令行参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-scripts（npm脚本）发送命令行参数"}},[s._v("#")]),s._v(" npm  scripts（npm脚本）发送命令行参数")]),s._v(" "),a("h3",{attrs:{id:"什么是npm-scripts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是npm-scripts"}},[s._v("#")]),s._v(" 什么是npm  scripts")]),s._v(" "),a("p",[s._v("npm 允许在package.json文件里面，使用scripts字段定义脚本命令。")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node build.js"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("上面代码是package.json文件的一个片段，里面的scripts字段是一个对象。它的每一个属性，对应一段脚本。比如，build命令对应的脚本是node build.js。")]),s._v(" "),a("h2",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),a("p",[s._v("执行npm run ,会自动创建一个shell, 在这个shell里面执行指定的脚本命令。\n比较特别的是， 这个shell 会自动将当前目录下的node_modules/.bin子目录加入"),a("code",[s._v("PATH")]),s._v("，执行结束， 再将"),a("code",[s._v("PATH")]),s._v("变量恢复原样")]),s._v(" "),a("h2",{attrs:{id:"通配符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通配符"}},[s._v("#")]),s._v(" 通配符")]),s._v(" "),a("p",[s._v("由于 npm 脚本就是 Shell 脚本，因为可以使用 Shell 通配符。")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jshint *.js"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jshint **/*.js"')]),s._v("\n")])])]),a("p",[s._v("上面代码中，*表示任意文件名，**表示任意一层子目录。\n如果要将通配符传入原始命令，防止被 Shell 转义，要将星号转义。")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tap test/\\*.js"')]),s._v("\n")])])]),a("h2",{attrs:{id:"传参"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传参"}},[s._v("#")]),s._v(" 传参")]),s._v(" "),a("p",[s._v("将命令行参数发送到npm脚本：")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("args"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("p",[s._v("注意必要的"),a("code",[s._v("--")]),s._v("，需要将参数传递到npm命令本身，并将其传递给脚本。")]),s._v(" "),a("h2",{attrs:{id:"使用webpack-defineplugin在打包时对文件中的变量进行替换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用webpack-defineplugin在打包时对文件中的变量进行替换"}},[s._v("#")]),s._v(" 使用webpack.DefinePlugin在打包时对文件中的变量进行替换")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DefinePlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'domain'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("  process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm scripts 使用指南"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://cloud.tencent.com/developer/ask/50047",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何向npm脚本发送命令行参数？"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://crossjae.github.io/2018/01/14/npmpackage/",target:"_blank",rel:"noopener noreferrer"}},[s._v("编译环境中的几种传参方法"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);